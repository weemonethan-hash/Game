<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>My School Timetable</title>
<style>
  body {
    font-family: Arial, Helvetica, sans-serif;
    background: #f3f3f3;
    color: #222;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 10px;
    margin: 0;
  }

  .table-container {
    width: 100%;
    max-width: 600px;
    overflow-x: auto; /* horizontal scroll on small screens */
  }

  table {
    border-collapse: collapse;
    width: 100%;
    min-width: 300px;
    background: #fff;
    box-shadow: 0 0 10px rgba(0,0,0,.1);
  }

  th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: center;
    font-size: 0.9rem;
  }

  th {
    background: #003366;
    color: #fff;
    font-size: 0.95rem;
  }

  caption {
    font-size: 1.2rem;
    font-weight: 600;
    padding: 10px;
  }

  .no-school {
    padding: 20px;
    text-align: center;
    font-size: 1rem;
  }

  .current {
    background-color: #fff3b0; /* highlight current period */
  }

  #countdown {
    margin: 10px 0 10px 0;
    font-size: 1rem;
    text-align: center;
  }

  @media (max-width: 480px) {
    th, td {
      padding: 6px;
      font-size: 0.85rem;
    }

    caption {
      font-size: 1rem;
    }

    #countdown {
      font-size: 0.9rem;
    }
  }
</style>
</head>
<body>

<div class="table-container">
  <div id="countdown"></div>
  <table id="timetable" aria-label="Today's timetable">
    <caption>Today's Timetable</caption>
    <thead>
      <tr><th>Subject</th><th>Teacher</th></tr>
    </thead>
    <tbody id="schedule"></tbody>
  </table>
</div>

<script>
const timetable = {
  Monday: [
    ["Mathematics NAT5","Mrs Pacher"],
    ["Mathematics NAT5","Mrs Pacher"],
    ["Design & Manufacture NAT5","Mr MacLennan"],
    ["Design & Manufacture NAT5","Mr MacLennan"],
    ["Personal & Social Education","Mrs Helley"],
    ["English NAT5","Dr Henderson"],
    ["English NAT5","Dr Henderson"]
  ],
  Tuesday: [
    ["Cyber Security School","Mr Creaney"],
    ["English NAT5","Dr Henderson"],
    ["Mathematics NAT5","Mrs Pacher"],
    ["Mathematics NAT5","Mrs Pacher"],
    ["Design & Manufacture NAT5","Mr MacLennan"],
    ["Practical Woodworking NAT5","Mr MacLennan"],
    ["Practical Woodworking NAT5","Mr MacLennan"]
  ],
  Wednesday: [
    ["English NAT5","Dr Henderson"],
    ["English NAT5","Dr Henderson"],
    ["Computing Science NAT5","Mr McCabe"],
    ["Computing Science NAT5","Mr McCabe"],
    ["Cyber Security School","-"],
    ["Cyber Security School","-"]
  ],
  Thursday: [
    ["Computing Science NAT5","Mr McCabe"],
    ["Mathematics NAT5","Mrs Pacher"],
    ["Design & Manufacture NAT5","Mr MacLennan"],
    ["Design & Manufacture NAT5","Mr MacLennan"],
    ["Practical Woodworking NAT5","Mr MacLennan"],
    ["Practical Woodworking NAT5","Mr MacLennan"]
  ],
  Friday: [
    ["Computing Science NAT5","Mr McCabe"],
    ["Computing Science NAT5","Mr McCabe"],
    ["Physical Education School","Mr MacDonald"],
    ["Practical Woodworking NAT5","Mr MacLennan"],
    ["Cyber Security School","-"],
    ["Cyber Security School","-"]
  ]
};

// Example times for each period to calculate current period and countdown
const periodTimes = {
  1: ["09:00","09:50"],
  2: ["09:50","10:40"],
  3: ["10:55","11:45"],
  4: ["11:45","12:35"],
  5: ["13:20","14:10"],
  6: ["14:10","15:00"],
  7: ["15:00","15:50"]
};

function timeToDate(today, str) {
  const [h,m] = str.split(":").map(Number);
  const d = new Date(today);
  d.setHours(h, m, 0, 0);
  return d;
}

function renderToday() {
  const today = new Date();
  const todayName = today.toLocaleDateString("en-GB",{weekday:"long"});
  const schedule = timetable[todayName];
  const tbody = document.getElementById("schedule");
  tbody.innerHTML = "";

  const countdownEl = document.getElementById("countdown");
  if (!schedule) {
    countdownEl.textContent = "";
    const row = document.createElement("tr");
    const td = document.createElement("td");
    td.colSpan = 2;
    td.className = "no-school";
    td.textContent = (todayName === "Saturday" || todayName === "Sunday") ? "No school â€“ Weekend!" : "No school today";
    row.appendChild(td);
    tbody.appendChild(row);
    return;
  }

  let nextPeriodTime = null;

  schedule.forEach((rowData, index) => {
    const tr = document.createElement("tr");
    const [subject, teacher] = rowData;
    [subject, teacher].forEach(text => {
      const td = document.createElement("td");
      td.textContent = text;
      tr.appendChild(td);
    });

    // Highlight current period using periodTimes
    const periodIndex = index + 1;
    const times = periodTimes[periodIndex];
    if(times){
      const start = timeToDate(today, times[0]);
      const end = timeToDate(today, times[1]);
      if(today >= start && today <= end){
        tr.classList.add("current");
      } else if(today < start && !nextPeriodTime){
        nextPeriodTime = start;
      }
    }

    tbody.appendChild(tr);
  });

  if(nextPeriodTime){
    const diffMs = nextPeriodTime - today;
    const diffMins = Math.floor(diffMs / 60000);
    const diffHrs = Math.floor(diffMins / 60);
    const mins = diffMins % 60;
    countdownEl.textContent = `Next period starts in ${diffHrs > 0 ? diffHrs + "h " : ""}${mins}min`;
  } else {
    countdownEl.textContent = "All periods for today are finished!";
  }
}

renderToday();
setInterval(renderToday, 60000); // update every minute
</script>

</body>
</html>
